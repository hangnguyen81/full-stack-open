(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(14),r=n.n(c),o=(n(19),n(3)),s=n(0),i=function(e){return Object(s.jsx)("input",{type:"text",onChange:e.onChange,placeholder:"Search contact"})},l=function(e){var t=e.contact,n=e.deleteContact;return Object(s.jsxs)("tr",{children:[Object(s.jsxs)("td",{children:[t.firstName," ",t.lastName]}),Object(s.jsx)("td",{children:t.number}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{onClick:n,children:"Delete"})})]})},u=function(e){var t=e.fname,n=e.lname,a=e.num,c=e.onSubmit,r=e.handleFname,o=e.handleLname,i=e.handleNumber;return Object(s.jsxs)("div",{className:"new-contact",children:[Object(s.jsx)("h3",{children:"new contact"}),Object(s.jsxs)("form",{onSubmit:c,autoComplete:"off",children:[Object(s.jsxs)("label",{children:["First name",Object(s.jsx)("input",{type:"text",value:t,name:"firstName",onChange:r,placeholder:"Enter first name"})]}),Object(s.jsxs)("label",{children:["Last name",Object(s.jsx)("input",{type:"text",value:n,name:"lastName",onChange:o,placeholder:"Enter last name"})]}),Object(s.jsxs)("label",{children:["Phone number",Object(s.jsx)("input",{type:"text",value:a,name:"number",onChange:i,placeholder:"Enter phone number"})]}),Object(s.jsx)("button",{type:"submit",children:"Add contact"})]})]})},b=n(4),j=n.n(b),d="/api/contacts",h=function(){return j.a.get(d).then((function(e){return e.data}))},m=function(e){return j.a.post(d,e).then((function(e){return e.data}))},f=function(e){return j.a.delete("".concat(d,"/").concat(e))},O=function(e,t){return j.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){var t=e.notification;return null===t?null:Object(s.jsx)("div",{className:t.type,children:t.message})};var x=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),b=Object(o.a)(r,2),j=b[0],d=b[1],x=Object(a.useState)(""),N=Object(o.a)(x,2),v=N[0],g=N[1],w=Object(a.useState)(""),y=Object(o.a)(w,2),C=y[0],k=y[1],S=Object(a.useState)(""),E=Object(o.a)(S,2),L=E[0],P=E[1],A=Object(a.useState)(null),D=Object(o.a)(A,2),F=D[0],T=D[1];Object(a.useEffect)((function(){h().then((function(e){c(e),d(e)}))}),[]);var I=function(){g(""),k(""),P("")},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";T({message:e,type:t}),setTimeout((function(){T(null)}),3e3)};return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("header",{children:"Awesome phonebook"}),Object(s.jsxs)("main",{className:"main",children:[Object(s.jsx)(u,{fname:v,lname:C,num:L,onSubmit:function(e){if(e.preventDefault(),""===v||""===C)return window.alert("Please enter all fields of contact");var t={firstName:v,lastName:C,number:L},a=n.find((function(e){return e.firstName===t.firstName&&e.lastName===t.lastName}));if(a){var r=a.id;window.confirm("".concat(t.firstName," ").concat(t.lastName," is already existed in phonebook, replace the old number with the new one"))&&O(r,t).then((function(e){var t=n.map((function(t){return t.id!==r?t:e}));c(t),d(t),J("The new phone number of ".concat(e.firstName," ").concat(e.lastName," is updated"))})),I()}else m(t).then((function(e){c(e),d(e),J("".concat(t.firstName," ").concat(t.lastName," is added to phonebook"))})).catch((function(e){return J(e.response.data,"error")})),I()},handleFname:function(e){return g(e.target.value)},handleLname:function(e){return k(e.target.value)},handleNumber:function(e){return P(e.target.value)}}),Object(s.jsxs)("div",{className:"contact-list",children:[Object(s.jsx)(i,{onChange:function(e){var t=e.target.value.toLowerCase();d(n.filter((function(e){return(e.firstName+" "+e.lastName).toLowerCase().includes(t)})))}}),Object(s.jsx)(p,{notification:F}),Object(s.jsx)("table",{id:"table-contact-list",children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Phone"}),Object(s.jsx)("th",{})]}),j.map((function(e){return Object(s.jsx)(l,{contact:e,deleteContact:function(){return function(e){if(window.confirm("Do you really want to delete this contact from phonebook")){f(e).catch((function(t){var a=n.find((function(t){return t.id===e}));J("Information of ".concat(a.firstName," ").concat(a.lastName," has already been removed from server"),"error")}));var t=n.filter((function(t){return t.id!==e}));c(t),d(t)}}(e.id)}},e.id)}))]})}),Object(s.jsxs)("p",{className:"subtitle left",children:["This phone book has",Object(s.jsxs)("span",{className:"number-of-contacts",children:[n.length," "]})," contacts"]})]})]}),Object(s.jsx)("footer",{className:"subtitle",children:"Awesome Phonebook@Hang Nguyen - 2021"})]})};r.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.409a9933.chunk.js.map